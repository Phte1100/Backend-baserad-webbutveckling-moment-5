function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t=globalThis,n={},o={},r=t.parcelRequireb44e;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequireb44e=r);var a=r.register;a("bJ4yP",function(t,n){function o(e){let t=document.getElementById("snackbar");t.textContent=e,t.className="show",setTimeout(()=>{t.className=t.className.replace("show","")},3e3)}function r(){let e=localStorage.getItem("token");if(!e){window.location.href="login.html";return}fetch("https://backend-baserad-webbutveckling-moment-5.onrender.com/api/bookings",{headers:{Authorization:`Bearer ${e}`}}).then(e=>{if(!e.ok)throw Error(`Failed to fetch bookings. Status: ${e.status}`);return e.json()}).then(e=>{(function(e){let t=document.getElementById("bookingsList");if(!t){console.warn('Element with id "bookingsList" not found');return}t.innerHTML="",e.forEach(e=>{let n=document.createElement("li");n.innerHTML=`
            ${e.name} - ${e.date.split("T")[0]} - ${e.time} - ${e.numberOfPeople} personer
            <span class="material-icons edit-booking-icon" data-bookingid="${e._id}">refresh</span>
            <span class="material-icons delete-booking-icon" data-bookingid="${e._id}">delete</span>
        <hr>
            `,t.appendChild(n)}),function(){let e=document.querySelectorAll(".delete-booking-icon"),t=document.querySelectorAll(".edit-booking-icon");if(0===e.length||0===t.length){console.warn("No delete or edit icons found");return}e.forEach(e=>{e.addEventListener("click",function(){!function(e){console.log(`Delete booking ID: ${e}`);let t=localStorage.getItem("token");if(!t){console.log("No token found, redirecting to login."),window.location.href="login.html";return}fetch(`https://backend-baserad-webbutveckling-moment-5.onrender.com/api/bookings/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}).then(e=>{if(!e.ok)throw Error("Failed to delete booking. Status: "+e.status);r(),o("Bokning raderad!")}).catch(e=>{console.error("Error:",e)})}(this.getAttribute("data-bookingid"))})}),t.forEach(e=>{e.addEventListener("click",function(){(function(e){console.log(`Editing booking ID: ${e}`);let t=localStorage.getItem("token");if(!t){console.log("No token found, redirecting to login."),window.location.href="login.html";return}fetch(`https://backend-baserad-webbutveckling-moment-5.onrender.com/api/bookings/${e}`,{headers:{Authorization:`Bearer ${t}`}}).then(e=>{if(!e.ok)throw Error("Failed to fetch booking. Status: "+e.status);return e.json()}).then(e=>{document.getElementById("bookingId").value=e._id,document.getElementById("name").value=e.name,document.getElementById("phone").value=e.phone,document.getElementById("email").value=e.email,document.getElementById("numberOfPeople").value=e.numberOfPeople,document.getElementById("date").value=e.date.split("T")[0],document.getElementById("time").value=e.time,document.getElementById("updateButton").style.display="block",document.getElementById("bookingForm").querySelector('button[type="submit"]').style.display="none"}).catch(e=>{console.error("Error:",e)})})(this.getAttribute("data-bookingid"))})})}()})(e)}).catch(e=>{console.error("Error:",e)})}function a(){let e=d(document.getElementById("name").value),t=d(document.getElementById("phone").value),n=d(document.getElementById("email").value),a=d(document.getElementById("numberOfPeople").value),i=d(document.getElementById("date").value),c=d(document.getElementById("time").value);console.log("Creating booking with data:",{name:e,phone:t,email:n,numberOfPeople:a,date:i,time:c}),fetch("https://backend-baserad-webbutveckling-moment-5.onrender.com/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,phone:t,email:n,numberOfPeople:a,date:i,time:c})}).then(e=>{if(!e.ok)throw Error("Failed to create booking. Status: "+e.status);return e.json()}).then(e=>{console.log("Booking created:",e),o("Bokning skapad!"),l(),localStorage.getItem("token")&&r()}).catch(e=>{console.error("Error:",e),o("Något gick fel. Försök igen.")})}function i(){let e=localStorage.getItem("token");if(!e){console.log("No token found, redirecting to login."),window.location.href="login.html";return}let t=document.getElementById("bookingId").value,n=document.getElementById("name").value,a=document.getElementById("phone").value,i=document.getElementById("email").value;fetch(`https://backend-baserad-webbutveckling-moment-5.onrender.com/api/bookings/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({name:n,phone:a,email:i,numberOfPeople:document.getElementById("numberOfPeople").value,date:document.getElementById("date").value,time:document.getElementById("time").value})}).then(e=>{if(!e.ok)throw Error("Failed to update booking. Status: "+e.status);return e.json()}).then(e=>{console.log("Booking updated:",e),r(),l(),o("Bokning uppdaterad!"),document.getElementById("updateButton").style.display="none",document.getElementById("bookingForm").querySelector('button[type="submit"]').style.display="block"}).catch(e=>{console.error("Error:",e)})}function l(){let e=document.getElementById("bookingId"),t=document.getElementById("name"),n=document.getElementById("phone"),o=document.getElementById("email"),r=document.getElementById("numberOfPeople"),a=document.getElementById("date"),i=document.getElementById("time");e&&(e.value=""),t&&(t.value=""),n&&(n.value=""),o&&(o.value=""),r&&(r.value="1"),a&&(a.value=""),i&&(i.value="")}function d(e){return e?e.replace(/(<([^>]+)>)/ig,""):""}e(t.exports,"fetchBookings",()=>r),e(t.exports,"createBooking",()=>a),e(t.exports,"updateBooking",()=>i)}),a("auqt6",function(e,t){var n=r("bJ4yP");document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("bookingForm");e&&e.addEventListener("submit",function(e){e.preventDefault(),(0,n.createBooking)()});let t=document.getElementById("updateButton");t&&t.addEventListener("click",function(){(0,n.updateBooking)()})})}),a("cpMDl",function(t,n){e(t.exports,"fetchMenuItems",()=>i),e(t.exports,"updateMenuItem",()=>l),e(t.exports,"sanitizeInput",()=>c),e(t.exports,"clearMenuForm",()=>d);var o=r("ekglj");document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("menuSection"),t=document.getElementById("menuItemsList");e||t?i():console.error('Neither "menuSection" nor "menuItemsList" found on this page.')});let a=[];function i(){fetch("https://backend-baserad-webbutveckling-moment-5.onrender.com/api/menu").then(e=>{if(!e.ok)throw Error(`Failed to fetch menu items. Status: ${e.status}`);return e.json()}).then(e=>{a=e,document.getElementById("menuSection")&&function(e){let t=document.getElementById("menuSection");t&&(t.innerHTML="",e.forEach(e=>{let n=document.createElement("article");n.innerHTML=`
        <h3>${e.name}</h3>
        <p>${e.description}</p>
        <p>${e.price} kr</p>
        `,t.appendChild(n)}))}(a),document.getElementById("menuItemsList")&&function(e){let t=document.getElementById("menuItemsList");if(!t){console.error('Element with id "menuItemsList" not found');return}t.innerHTML="",e.forEach(e=>{let n=document.createElement("li");n.innerHTML=`
            ${e.name} - ${e.description} - ${e.price} kr - ${e.category}
            <br>
            <span class="material-icons edit-menu-icon" data-menuid="${e._id}">refresh</span>
            <span class="material-icons delete-menu-icon" data-menuid="${e._id}">delete</span>
            <hr>
            `,t.appendChild(n)}),function(){let e=document.querySelectorAll(".delete-menu-icon"),t=document.querySelectorAll(".edit-menu-icon");e.forEach(e=>{e.addEventListener("click",function(){(function(e){console.log(`Delete menu item ID: ${e}`);let t=localStorage.getItem("token");if(!t){console.log("No token found, redirecting to login."),window.location.href="login.html";return}fetch(`https://backend-baserad-webbutveckling-moment-5.onrender.com/api/menu/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}).then(e=>{if(!e.ok)throw Error("Failed to delete menu item. Status: "+e.status);i(),(0,o.showSnackbar)("Menyalternativ raderad!")}).catch(e=>{console.error("Error:",e),(0,o.showSnackbar)("Något gick fel. Försök igen.")})})(this.getAttribute("data-menuid"))})}),t.forEach(e=>{e.addEventListener("click",function(){(function(e){console.log(`Editing menu item ID: ${e}`);let t=localStorage.getItem("token");if(!t){console.log("No token found, redirecting to login."),window.location.href="login.html";return}fetch(`https://backend-baserad-webbutveckling-moment-5.onrender.com/api/menu/${e}`,{headers:{Authorization:`Bearer ${t}`}}).then(e=>{if(!e.ok)throw Error("Failed to fetch menu item. Status: "+e.status);return e.json()}).then(e=>{document.getElementById("menuId").value=e._id,document.getElementById("menuName").value=e.name,document.getElementById("description").value=e.description,document.getElementById("price").value=e.price,document.getElementById("category").value=e.category,document.getElementById("updateMenuButton").style.display="block",document.getElementById("menuForm").querySelector('button[type="submit"]').style.display="none"}).catch(e=>{console.error("Error:",e)})})(this.getAttribute("data-menuid"))})})}()}(a)}).catch(e=>{console.error("Error:",e)})}function l(){let e=localStorage.getItem("token");if(!e){window.location.href="login.html";return}let t=document.getElementById("menuId").value,n=c(document.getElementById("menuName").value);fetch(`https://backend-baserad-webbutveckling-moment-5.onrender.com/api/menu/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({name:n,description:c(document.getElementById("description").value),price:c(document.getElementById("price").value),category:c(document.getElementById("category").value)})}).then(e=>{if(!e.ok)throw Error("Failed to update menu item. Status: "+e.status);return e.json()}).then(e=>{console.log("Menu item updated:",e),i(),d(),(0,o.showSnackbar)("Menyalternativ uppdaterad!")}).catch(e=>{console.error("Error:",e),(0,o.showSnackbar)("Något gick fel. Försök igen.")})}function d(){document.getElementById("menuId").value="",document.getElementById("menuName").value="",document.getElementById("description").value="",document.getElementById("price").value="",document.getElementById("category").value="",document.getElementById("updateMenuButton").style.display="none",document.getElementById("menuForm").querySelector('button[type="submit"]').style.display="block"}function c(e){return e?e.replace(/(<([^>]+)>)/ig,""):""}}),a("ekglj",function(t,n){function o(){var e=document.getElementById("myTopnav");"topnav"===e.className?e.className+=" responsive":e.className="topnav"}function r(e){var t=document.getElementById("snackbar");t.textContent=e,t.className="show",setTimeout(function(){t.className=t.className.replace("show","")},3e3)}function a(e){return e?e.replace(/(<([^>]+)>)/ig,""):""}e(t.exports,"myFunction",()=>o),e(t.exports,"showSnackbar",()=>r),e(t.exports,"sanitizeInput",()=>a)});var i=r("bJ4yP");document.addEventListener("DOMContentLoaded",function(){(0,i.fetchBookings)()}),r("auqt6"),r("cpMDl");var l=r("cpMDl"),d=r("ekglj");function c(){localStorage.removeItem("token");let e=document.getElementById("feedback");e&&(e.textContent="Du har loggats ut."),setTimeout(()=>{window.location.href="login.html"},1e3)}document.addEventListener("DOMContentLoaded",function(){document.getElementById("menuForm").addEventListener("submit",function(e){e.preventDefault(),function(){let e=localStorage.getItem("token");if(!e){window.location.href="login.html";return}let t=(0,l.sanitizeInput)(document.getElementById("menuName").value);fetch("https://backend-baserad-webbutveckling-moment-5.onrender.com/api/menu",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({name:t,description:(0,l.sanitizeInput)(document.getElementById("description").value),price:(0,l.sanitizeInput)(document.getElementById("price").value),category:(0,l.sanitizeInput)(document.getElementById("category").value)})}).then(e=>{if(!e.ok)throw Error("Failed to create menu item. Status: "+e.status);return e.json()}).then(e=>{console.log("Menu item created:",e),(0,l.fetchMenuItems)(),(0,l.clearMenuForm)(),(0,d.showSnackbar)("Menyalternativ skapat!")}).catch(e=>{console.error("Error:",e),(0,d.showSnackbar)("Något gick fel. Försök igen.")})}()});let e=document.getElementById("updateMenuButton");e&&e.addEventListener("click",function(){(0,l.updateMenuItem)()})}),document.addEventListener("DOMContentLoaded",function(){localStorage.getItem("token")||(window.location.href="login.html"),function(){let e=localStorage.getItem("token");fetch("https://backend-baserad-webbutveckling-moment-5.onrender.com/api/protected",{headers:{Authorization:`Bearer ${e}`}}).then(e=>{if(!e.ok)throw 401===e.status&&(alert("Sessionen har gått ut. Vänligen logga in igen."),localStorage.removeItem("token"),window.location.href="login.html"),Error("Kunde inte hämta skyddad data.");return e.json()}).then(e=>{var t;Array.isArray(t=e)||(t=[t]),t.map(e=>({...e,username:e.username?e.username.replace(/(<([^>]+)>)/ig,""):"",password:e.password?e.password.replace(/(<([^>]+)>)/ig,""):""}))}).catch(e=>{console.error("Error:",e);let t=document.getElementById("feedback");t&&(t.textContent="Ett fel inträffade vid hämtning av data. Vänligen försök igen.")})}();let e=document.getElementById("logoutLink");e&&e.addEventListener("click",c)});var d=r("ekglj");window.myFunction=d.myFunction,window.showSnackbar=d.showSnackbar,window.sanitizeInput=d.sanitizeInput;
//# sourceMappingURL=dashboard.6e6bdf97.js.map
