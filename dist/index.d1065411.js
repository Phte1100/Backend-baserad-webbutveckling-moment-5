function e(e){let t=document.getElementById("snackbar");t.textContent=e,t.className="show",setTimeout(()=>{t.className=t.className.replace("show","")},3e3)}function t(){let n=localStorage.getItem("token");if(!n){window.location.href="login.html";return}fetch("https://backend-baserad-webbutveckling-moment-5.onrender.com/api/bookings",{headers:{Authorization:`Bearer ${n}`}}).then(e=>{if(!e.ok)throw Error(`Failed to fetch bookings. Status: ${e.status}`);return e.json()}).then(n=>{!function(n){let o=document.getElementById("bookingsList");if(!o){console.warn('Element with id "bookingsList" not found');return}o.innerHTML="",n.forEach(e=>{let t=document.createElement("li");t.innerHTML=`
            ${e.name} - ${e.date.split("T")[0]} - ${e.time} - ${e.numberOfPeople} personer
            <span class="material-icons edit-booking-icon" data-bookingid="${e._id}">refresh</span>
            <span class="material-icons delete-booking-icon" data-bookingid="${e._id}">delete</span>
        <hr>
            `,o.appendChild(t)}),function(){let n=document.querySelectorAll(".delete-booking-icon"),o=document.querySelectorAll(".edit-booking-icon");if(0===n.length||0===o.length){console.warn("No delete or edit icons found");return}n.forEach(n=>{n.addEventListener("click",function(){!function(n){console.log(`Delete booking ID: ${n}`);let o=localStorage.getItem("token");if(!o){console.log("No token found, redirecting to login."),window.location.href="login.html";return}fetch(`https://backend-baserad-webbutveckling-moment-5.onrender.com/api/bookings/${n}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}}).then(n=>{if(!n.ok)throw Error("Failed to delete booking. Status: "+n.status);t(),e("Bokning raderad!")}).catch(e=>{console.error("Error:",e)})}(this.getAttribute("data-bookingid"))})}),o.forEach(e=>{e.addEventListener("click",function(){(function(e){console.log(`Editing booking ID: ${e}`);let t=localStorage.getItem("token");if(!t){console.log("No token found, redirecting to login."),window.location.href="login.html";return}fetch(`https://backend-baserad-webbutveckling-moment-5.onrender.com/api/bookings/${e}`,{headers:{Authorization:`Bearer ${t}`}}).then(e=>{if(!e.ok)throw Error("Failed to fetch booking. Status: "+e.status);return e.json()}).then(e=>{document.getElementById("bookingId").value=e._id,document.getElementById("name").value=e.name,document.getElementById("phone").value=e.phone,document.getElementById("email").value=e.email,document.getElementById("numberOfPeople").value=e.numberOfPeople,document.getElementById("date").value=e.date.split("T")[0],document.getElementById("time").value=e.time,document.getElementById("updateButton").style.display="block",document.getElementById("bookingForm").querySelector('button[type="submit"]').style.display="none"}).catch(e=>{console.error("Error:",e)})})(this.getAttribute("data-bookingid"))})})}()}(n)}).catch(e=>{console.error("Error:",e)})}function n(){let e=document.getElementById("bookingId"),t=document.getElementById("name"),n=document.getElementById("phone"),o=document.getElementById("email"),i=document.getElementById("numberOfPeople"),r=document.getElementById("date"),l=document.getElementById("time");e&&(e.value=""),t&&(t.value=""),n&&(n.value=""),o&&(o.value=""),i&&(i.value="1"),r&&(r.value=""),l&&(l.value="")}function o(e){return e?e.replace(/(<([^>]+)>)/ig,""):""}function i(e){var t=document.getElementById("snackbar");t.textContent=e,t.className="show",setTimeout(function(){t.className=t.className.replace("show","")},3e3)}document.addEventListener("DOMContentLoaded",function(){let i=document.getElementById("bookingForm");i&&i.addEventListener("submit",function(i){i.preventDefault(),function(){let i=o(document.getElementById("name").value),r=o(document.getElementById("phone").value),l=o(document.getElementById("email").value);fetch("https://backend-baserad-webbutveckling-moment-5.onrender.com/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,phone:r,email:l,numberOfPeople:o(document.getElementById("numberOfPeople").value),date:o(document.getElementById("date").value),time:o(document.getElementById("time").value)})}).then(e=>{if(!e.ok)throw Error("Failed to create booking. Status: "+e.status);return e.json()}).then(o=>{console.log("Booking created:",o),e("Bokning skapad!"),t(),n()}).catch(t=>{console.error("Error:",t),e("Något gick fel. Försök igen.")})}()});let r=document.getElementById("updateButton");r&&r.addEventListener("click",function(){!function(){let o=localStorage.getItem("token");if(!o){console.log("No token found, redirecting to login."),window.location.href="login.html";return}let i=document.getElementById("bookingId").value,r=document.getElementById("name").value,l=document.getElementById("phone").value,a=document.getElementById("email").value;fetch(`https://backend-baserad-webbutveckling-moment-5.onrender.com/api/bookings/${i}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({name:r,phone:l,email:a,numberOfPeople:document.getElementById("numberOfPeople").value,date:document.getElementById("date").value,time:document.getElementById("time").value})}).then(e=>{if(!e.ok)throw Error("Failed to update booking. Status: "+e.status);return e.json()}).then(o=>{console.log("Booking updated:",o),t(),n(),e("Bokning uppdaterad!"),document.getElementById("updateButton").style.display="none",document.getElementById("bookingForm").querySelector('button[type="submit"]').style.display="block"}).catch(e=>{console.error("Error:",e)})}()})}),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("menuSection"),t=document.getElementById("menuItemsList");e||t?function e(){fetch("https://backend-baserad-webbutveckling-moment-5.onrender.com/api/menu").then(e=>{if(!e.ok)throw Error(`Failed to fetch menu items. Status: ${e.status}`);return e.json()}).then(t=>{r=t,document.getElementById("menuSection")&&function(e){let t=document.getElementById("menuSection");t&&(t.innerHTML="",e.forEach(e=>{let n=document.createElement("article");n.innerHTML=`
        <h3>${e.name}</h3>
        <p>${e.description}</p>
        <p>${e.price} kr</p>
        `,t.appendChild(n)}))}(r),document.getElementById("menuItemsList")&&function(t){let n=document.getElementById("menuItemsList");if(!n){console.error('Element with id "menuItemsList" not found');return}n.innerHTML="",t.forEach(e=>{let t=document.createElement("li");t.innerHTML=`
            ${e.name} - ${e.description} - ${e.price} kr - ${e.category}
            <br>
            <span class="material-icons edit-menu-icon" data-menuid="${e._id}">refresh</span>
            <span class="material-icons delete-menu-icon" data-menuid="${e._id}">delete</span>
            <hr>
            `,n.appendChild(t)}),function(){let t=document.querySelectorAll(".delete-menu-icon"),n=document.querySelectorAll(".edit-menu-icon");t.forEach(t=>{t.addEventListener("click",function(){(function(t){console.log(`Delete menu item ID: ${t}`);let n=localStorage.getItem("token");if(!n){console.log("No token found, redirecting to login."),window.location.href="login.html";return}fetch(`https://backend-baserad-webbutveckling-moment-5.onrender.com/api/menu/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}}).then(t=>{if(!t.ok)throw Error("Failed to delete menu item. Status: "+t.status);e(),i("Menyalternativ raderad!")}).catch(e=>{console.error("Error:",e),i("Något gick fel. Försök igen.")})})(this.getAttribute("data-menuid"))})}),n.forEach(e=>{e.addEventListener("click",function(){(function(e){console.log(`Editing menu item ID: ${e}`);let t=localStorage.getItem("token");if(!t){console.log("No token found, redirecting to login."),window.location.href="login.html";return}fetch(`https://backend-baserad-webbutveckling-moment-5.onrender.com/api/menu/${e}`,{headers:{Authorization:`Bearer ${t}`}}).then(e=>{if(!e.ok)throw Error("Failed to fetch menu item. Status: "+e.status);return e.json()}).then(e=>{document.getElementById("menuId").value=e._id,document.getElementById("menuName").value=e.name,document.getElementById("description").value=e.description,document.getElementById("price").value=e.price,document.getElementById("category").value=e.category,document.getElementById("updateMenuButton").style.display="block",document.getElementById("menuForm").querySelector('button[type="submit"]').style.display="none"}).catch(e=>{console.error("Error:",e)})})(this.getAttribute("data-menuid"))})})}()}(r)}).catch(e=>{console.error("Error:",e)})}():console.error('Neither "menuSection" nor "menuItemsList" found on this page.')});let r=[];window.myFunction=function(){var e=document.getElementById("myTopnav");"topnav"===e.className?e.className+=" responsive":e.className="topnav"},window.showSnackbar=i,window.sanitizeInput=function(e){return e?e.replace(/(<([^>]+)>)/ig,""):""};
//# sourceMappingURL=index.d1065411.js.map
